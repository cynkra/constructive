
R version 4.4.0 (2024-04-24) -- "Puppy Cup"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # This file is part of the standard setup for testthat.
> # It is recommended that you do not modify it.
> #
> # Where should you do additional test configuration?
> # Learn more about the roles of various files in:
> # * https://r-pkgs.org/tests.html
> # * https://testthat.r-lib.org/reference/test_package.html#special-files
> 
> library(testthat)
Warning message:
package 'testthat' was built under R version 4.4.1 
> library(duckplyr)
The duckplyr package is configured to fall back to dplyr when it encounters an
incompatibility. Fallback events can be collected and uploaded for analysis to
guide future development. By default, no data will be collected or uploaded.
→ Run `duckplyr::fallback_sitrep()` to review the current settings.
✔ Overwriting dplyr methods with duckplyr methods.
ℹ Turn off with `duckplyr::methods_restore()`.

Attaching package: 'duckplyr'

The following object is masked from 'package:testthat':

    matches

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union

> 
> test_check("duckplyr")
v Overwriting dplyr methods with duckplyr methods.
i Turn off with `duckplyr::methods_restore()`.
i Restoring dplyr methods.
[ FAIL 0 | WARN 0 | SKIP 353 | PASS 1410 ]

══ Skipped tests (353) ═════════════════════════════════════════════════════════
• Always returns tibble (1): 'test-as_duckplyr_df.R:760:3'
• External vector? (5): 'test-as_duckplyr_df.R:2395:3',
  'test-as_duckplyr_df.R:2411:3', 'test-as_duckplyr_df.R:2427:3',
  'test-as_duckplyr_df.R:2441:3', 'test-as_duckplyr_df.R:2457:3'
• Grouped (4): 'test-as_duckplyr_df.R:686:3', 'test-as_duckplyr_df.R:744:3',
  'test-as_duckplyr_df.R:806:3', 'test-as_duckplyr_df.R:2703:3'
• Hack (1): 'test-as_duckplyr_df.R:575:3'
• Missing or empty names not allowed. (6): 'test-mutate.R:900:3',
  'test-filter.R:646:3', 'test-select.R:40:3', 'test-select.R:136:3',
  'test-select.R:145:3', 'test-summarise.R:439:3'
• Must pass a plain data frame or a tibble to `as_duckplyr_df()`. (165):
  'test-mutate.R:7:3', 'test-mutate.R:49:3', 'test-mutate.R:77:3',
  'test-mutate.R:109:3', 'test-mutate.R:169:3', 'test-mutate.R:242:3',
  'test-mutate.R:256:3', 'test-mutate.R:293:3', 'test-mutate.R:302:3',
  'test-mutate.R:314:3', 'test-mutate.R:329:3', 'test-mutate.R:360:3',
  'test-mutate.R:366:3', 'test-mutate.R:373:3', 'test-mutate.R:400:3',
  'test-mutate.R:407:3', 'test-mutate.R:425:3', 'test-mutate.R:454:3',
  'test-mutate.R:464:3', 'test-mutate.R:484:3', 'test-mutate.R:578:3',
  'test-mutate.R:587:3', 'test-mutate.R:625:3', 'test-mutate.R:634:3',
  'test-mutate.R:663:3', 'test-mutate.R:672:3', 'test-mutate.R:693:3',
  'test-mutate.R:733:3', 'test-mutate.R:744:3', 'test-mutate.R:758:3',
  'test-mutate.R:769:3', 'test-mutate.R:775:3', 'test-mutate.R:790:3',
  'test-mutate.R:890:3', 'test-filter.R:8:5', 'test-filter.R:27:3',
  'test-filter.R:54:3', 'test-filter.R:117:3', 'test-filter.R:157:3',
  'test-filter.R:184:3', 'test-filter.R:222:3', 'test-filter.R:228:3',
  'test-filter.R:236:3', 'test-filter.R:302:3', 'test-filter.R:318:3',
  'test-filter.R:360:3', 'test-filter.R:436:3', 'test-filter.R:543:3',
  'test-filter.R:566:3', 'test-filter.R:577:3', 'test-filter.R:619:3',
  'test-filter.R:631:3', 'test-filter.R:702:3', 'test-filter.R:711:3',
  'test-count-tally.R:57:3', 'test-count-tally.R:66:3',
  'test-count-tally.R:77:3', 'test-count-tally.R:89:3',
  'test-count-tally.R:105:3', 'test-count-tally.R:159:3',
  'test-count-tally.R:175:3', 'test-across.R:14:3', 'test-across.R:21:3',
  'test-across.R:323:3', 'test-across.R:333:3', 'test-across.R:678:3',
  'test-across.R:693:5', 'test-across.R:1069:3', 'test-across.R:1128:3',
  'test-across.R:1162:3', 'test-across.R:1254:3', 'test-across.R:1377:3',
  'test-across.R:1391:3', 'test-arrange.R:9:3', 'test-arrange.R:206:3',
  'test-arrange.R:213:3', 'test-arrange.R:219:3', 'test-arrange.R:288:3',
  'test-arrange.R:299:3', 'test-arrange.R:337:3', 'test-arrange.R:381:3',
  'test-colwise-select.R:38:3', 'test-colwise-select.R:93:3',
  'test-colwise-select.R:141:3', 'test-deprec-do.R:10:3',
  'test-deprec-do.R:18:3', 'test-deprec-do.R:33:3', 'test-deprec-do.R:42:3',
  'test-deprec-do.R:49:3', 'test-deprec-do.R:63:5', 'test-deprec-do.R:94:3',
  'test-deprec-do.R:105:3', 'test-deprec-do.R:178:3', 'test-deprec-do.R:183:3',
  'test-deprec-do.R:198:3', 'test-distinct.R:50:3', 'test-distinct.R:56:3',
  'test-distinct.R:64:3', 'test-distinct.R:115:3', 'test-distinct.R:156:3',
  'test-group-map.R:2:3', 'test-group-map.R:20:3', 'test-group-map.R:34:3',
  'test-group-map.R:59:3', 'test-group-map.R:71:3', 'test-group-map.R:83:3',
  'test-group-map.R:104:3', 'test-group-map.R:120:3', 'test-join.R:492:3',
  'test-join.R:623:3', 'test-join.R:645:3', 'test-join.R:668:3',
  'test-join.R:678:3', 'test-rename.R:9:3', 'test-rename.R:31:3',
  'test-select.R:4:3', 'test-select.R:12:3', 'test-select.R:28:3',
  'test-select.R:87:3', 'test-select.R:106:3', 'test-select.R:176:3',
  'test-sets.R:38:3', 'test-sets.R:46:3', 'test-sets.R:136:3',
  'test-slice.R:8:3', 'test-slice.R:21:3', 'test-slice.R:31:3',
  'test-slice.R:48:3', 'test-slice.R:79:3', 'test-slice.R:99:3',
  'test-slice.R:123:3', 'test-slice.R:135:3', 'test-slice.R:202:3',
  'test-slice.R:211:3', 'test-slice.R:334:3', 'test-slice.R:379:3',
  'test-slice.R:393:3', 'test-slice.R:587:3', 'test-slice.R:613:3',
  'test-slice.R:634:3', 'test-summarise.R:19:3', 'test-summarise.R:45:3',
  'test-summarise.R:61:3', 'test-summarise.R:77:3', 'test-summarise.R:96:3',
  'test-summarise.R:131:3', 'test-summarise.R:189:3', 'test-summarise.R:206:3',
  'test-summarise.R:211:3', 'test-summarise.R:221:3', 'test-summarise.R:235:3',
  'test-summarise.R:241:3', 'test-summarise.R:255:3', 'test-summarise.R:272:3',
  'test-summarise.R:284:3', 'test-summarise.R:324:3', 'test-summarise.R:337:3',
  'test-summarise.R:345:3', 'test-summarise.R:405:3', 'test-summarise.R:414:3',
  'test-transmute.R:2:3', 'test-transmute.R:9:3', 'test-transmute.R:27:3',
  'test-transmute.R:49:3', 'test-transmute.R:82:3'
• On CRAN (148): 'test-tpch.R:110:3', 'test-mutate.R:137:3',
  'test-mutate.R:197:3', 'test-filter.R:403:3', 'test-filter.R:421:3',
  'test-filter.R:430:3', 'test-filter.R:693:3', 'test-filter.R:719:3',
  'test-count-tally.R:47:3', 'test-count-tally.R:120:3',
  'test-count-tally.R:135:3', 'test-count-tally.R:163:3',
  'test-count-tally.R:187:3', 'test-count-tally.R:219:3',
  'test-across.R:144:3', 'test-across.R:153:3', 'test-across.R:209:3',
  'test-across.R:222:3', 'test-across.R:617:3', 'test-across.R:767:3',
  'test-across.R:796:3', 'test-across.R:1152:3', 'test-across.R:1196:3',
  'test-across.R:1225:3', 'test-across.R:1290:3', 'test-across.R:1302:3',
  'test-all-equal.R:2:3', 'test-all-equal.R:27:3', 'test-all-equal.R:36:3',
  'test-all-equal.R:47:3', 'test-all-equal.R:61:3', 'test-all-equal.R:114:3',
  'test-all-equal.R:142:3', 'test-all-equal.R:155:3', 'test-all-equal.R:163:3',
  'test-all-equal.R:171:3', 'test-arrange.R:29:3', 'test-arrange.R:169:3',
  'test-arrange.R:178:3', 'test-arrange.R:192:3', 'test-arrange.R:321:3',
  'test-colwise-select.R:175:3', 'test-demo.R:9:3', 'test-deprec-funs.R:119:3',
  'test-deprec-funs.R:127:3', 'test-distinct.R:180:3', 'test-duckplyr.R:18:3',
  'test-expr.R:2:3', 'test-fallback.R:10:3', 'test-fallback.R:24:3',
  'test-fallback.R:38:3', 'test-fallback.R:51:3', 'test-fallback.R:57:3',
  'test-fallback.R:69:3', 'test-fallback.R:87:3', 'test-fallback.R:113:3',
  'test-fallback.R:131:3', 'test-fallback.R:147:3', 'test-fallback.R:161:3',
  'test-fallback.R:175:3', 'test-fallback.R:189:3', 'test-fallback.R:203:3',
  'test-fallback.R:218:3', 'test-fallback.R:233:3', 'test-join-rows.R:3:3',
  'test-join-rows.R:158:3', 'test-join-rows.R:164:3', 'test-join-rows.R:172:3',
  'test-join-rows.R:181:3', 'test-join-rows.R:187:3', 'test-join-rows.R:207:3',
  'test-join-rows.R:271:3', 'test-join-rows.R:382:3', 'test-join-rows.R:401:3',
  'test-join-rows.R:415:3', 'test-join.R:150:3', 'test-join.R:337:3',
  'test-join.R:349:3', 'test-join.R:383:3', 'test-join.R:389:3',
  'test-join.R:446:3', 'test-join.R:455:3', 'test-join.R:465:3',
  'test-join.R:513:3', 'test-join.R:550:3', 'test-join.R:600:3',
  'test-join.R:704:3', 'test-join.R:715:3', 'test-join.R:726:3',
  'test-join.R:749:3', 'test-join.R:763:3', 'test-relational-duckdb.R:37:3',
  'test-relational-duckdb.R:80:3', 'test-relational-duckdb.R:99:3',
  'test-relational-rel.R:2:3', 'test-relational.R:4:3', 'test-relocate.R:30:3',
  'test-rename.R:75:3', 'test-rename.R:85:3', 'test-rename.R:94:3',
  'test-select.R:158:3', 'test-sets.R:59:3', 'test-sets.R:73:3',
  'test-sets.R:83:3', 'test-sets.R:127:3', 'test-sets.R:140:3',
  'test-slice.R:40:3', 'test-slice.R:63:3', 'test-slice.R:71:3',
  'test-slice.R:109:3', 'test-slice.R:193:3', 'test-slice.R:219:3',
  'test-slice.R:230:3', 'test-slice.R:240:3', 'test-slice.R:248:3',
  'test-slice.R:299:3', 'test-slice.R:342:3', 'test-slice.R:405:3',
  'test-slice.R:517:3', 'test-slice.R:524:3', 'test-slice.R:559:3',
  'test-slice.R:571:3', 'test-summarise.R:158:3', 'test-summarise.R:396:3',
  'test-summarise.R:539:3', 'test-telemetry.R:4:3', 'test-telemetry.R:45:3',
  'test-telemetry.R:59:3', 'test-telemetry.R:73:3', 'test-telemetry.R:87:3',
  'test-telemetry.R:107:3', 'test-telemetry.R:130:3', 'test-telemetry.R:154:3',
  'test-telemetry.R:162:3', 'test-telemetry.R:186:3', 'test-telemetry.R:200:3',
  'test-telemetry.R:220:3', 'test-telemetry.R:228:3', 'test-telemetry.R:252:3',
  'test-telemetry.R:260:3', 'test-telemetry.R:279:3', 'test-telemetry.R:287:3',
  'test-telemetry.R:307:3', 'test-telemetry.R:315:3', 'test-telemetry.R:323:3',
  'test-translate.R:10:3', 'test-translate.R:16:3', 'test-transmute.R:90:3'
• Random seed (2): 'test-as_duckplyr_df.R:2192:3',
  'test-as_duckplyr_df.R:2208:3'
• Special (5): 'test-as_duckplyr_df.R:700:3', 'test-as_duckplyr_df.R:716:3',
  'test-as_duckplyr_df.R:776:3', 'test-as_duckplyr_df.R:851:3',
  'test-as_duckplyr_df.R:1709:3'
• Stack overflow (1): 'test-as_duckplyr_df.R:2176:3'
• TODO duckdb (11): 'test-all-equal.R:180:3', 'test-generics.R:160:3',
  'test-join-rows.R:193:3', 'test-join-rows.R:430:3', 'test-join-rows.R:446:3',
  'test-join-rows.R:459:3', 'test-join.R:356:3', 'test-join.R:362:3',
  'test-summarise.R:30:3', 'test-summarise.R:307:3', 'test-summarise.R:448:3'
• WAT (3): 'test-as_duckplyr_df.R:730:3', 'test-as_duckplyr_df.R:790:3',
  'test-as_duckplyr_df.R:1723:3'
• Won't need (1): 'test-prom.R:2:3'

[ FAIL 0 | WARN 0 | SKIP 353 | PASS 1410 ]

🛠: 1533
🔨:  854
🦆:  679
add_count, anti_join, arrange, compute, count, cross_join, distinct, do, eval, filter, full_join, group_by, group_keys, group_map, group_modify, group_split, head, inner_join, intersect, left_join, mutate, mutate.data.frame, nest_join, pull, reframe, relocate, rename, rename_with, right_join, rows_append, rows_delete, rows_insert, rows_patch, rows_update, rows_upsert, rowwise, select, semi_join, setdiff, setequal, slice, slice_head, slice_sample, slice_tail, summarise, symdiff, transmute, ungroup, union_all

00:00:23.768611
> 
> proc.time()
   user  system elapsed 
 21.291   3.114  24.134 
