<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • constructive</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://cynkra.github.io/constructive/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">constructive</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extend-constructive.html">Extend constructive</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cynkra/constructive/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/cynkra/constructive/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="constructive-development-version">constructive (development version)<a class="anchor" aria-label="anchor" href="#constructive-development-version"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="constructive-101">constructive 1.0.1<a class="anchor" aria-label="anchor" href="#constructive-101"></a></h2><p class="text-muted">CRAN release: 2024-07-07</p>
<ul><li>We fixed a typo that was breaking <code>.cstr_new_class(, commented = TRUE)</code>
</li>
<li>We fixed a bug regarding high precedence infix operators that was breaking <code><a href="../reference/deparse_call.html">deparse_call()</a></code>
</li>
<li>“simpleUnit” is considered as a “grid” package class, not a “base” class and we fixed the check for corrupted “simpleUnit” objects</li>
<li>The construction of “ScalesList” objects is improved, it failed in some cases</li>
<li>The construction of “CoordCartesian” is improved and considers the “default” argument</li>
<li>Improved vignette consistency</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="constructive-100">constructive 1.0.0<a class="anchor" aria-label="anchor" href="#constructive-100"></a></h2><p class="text-muted">CRAN release: 2024-07-02</p>
<div class="section level3">
<h3 id="internals-extension-system-cosmetics-1-0-0">Internals, extension system, cosmetics<a class="anchor" aria-label="anchor" href="#internals-extension-system-cosmetics-1-0-0"></a></h3>
<ul><li>The internals have changed quite a bit, and a new extension system has been developed.</li>
<li>The vignette “extend-constructive” details it and how constructive works.</li>
<li>The package {constructive.example} was updated to reflect the new system.</li>
<li>We remove non API calls in the C code, to comply with new CRAN rules.</li>
<li>The pkgdown website categorizes the functions so the package can be explored more conveniently (Thanks Maelle Salmon <a href="https://github.com/maelle" class="external-link">@maelle</a> for the suggestion).</li>
<li>The doc was improved overall</li>
<li>The README was reworked</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-1-0-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-1-0-0"></a></h3>
<ul><li>Two new functions <code><a href="../reference/construct_dput.html">construct_dput()</a></code> and <code><a href="../reference/construct_dput.html">construct_base()</a></code> allow to construct objects respectively without using high level constructors at all, or using only those included in base packages (such as <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> etc).</li>
<li>A new function <code><a href="../reference/construct_clip.html">construct_clip()</a></code> is just like <code><a href="../reference/construct.html">construct()</a></code> but copies code directly to the clipboard (Thanks Josiah Parry <a href="https://github.com/JosiahParry" class="external-link">@JosiahParry</a> for the suggestion).</li>
<li>We now have <code><a href="../reference/opts_logical.html">opts_logical()</a></code>, <code><a href="../reference/opts_integer.html">opts_integer()</a></code>, <code><a href="../reference/opts_double.html">opts_double()</a></code>, <code><a href="../reference/opts_complex.html">opts_complex()</a></code>, <code><a href="../reference/opts_character.html">opts_character()</a></code> and <code><a href="../reference/opts_raw.html">opts_raw()</a></code> so options can be set independently. <code><a href="../reference/opts_atomic.html">opts_atomic()</a></code> still works to set a. behavior for all atomics but the new functions have precedence. The “raw” type is supported better can be constructed from integers in decimal or hexadecimal notation with the “as.raw” constructor, or from character using the “charToRaw” constructor.</li>
<li>The new functions <code><a href="../reference/templates.html">.cstr_new_class()</a></code> and <code>.cstr_new_template()</code> facilitate the process of working with the new extension system.</li>
</ul></div>
<div class="section level3">
<h3 id="new-classes-1-0-0">New classes<a class="anchor" aria-label="anchor" href="#new-classes-1-0-0"></a></h3>
<ul><li>Expression vectors are now supported (For some reason we had missed it!).</li>
<li>We implement constructors for the following base R classes:
<ul><li>citationFooter</li>
<li>citationHeader</li>
<li>hexmode</li>
<li>octmode</li>
<li>person</li>
<li>difftime</li>
<li>simpleError</li>
<li>simpleWarning</li>
<li>simpleMessage</li>
<li>simpleCondition</li>
<li>errorCondition</li>
<li>warningCondition</li>
</ul></li>
<li>We support the class “integer64” from the {bit64} package. It was important because we can’t recreate <code>NA</code> or negative integer64 objects using base R only.</li>
<li>We support the class “blob” from the {blob} package.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-and-deprecation-1-0-0">New features and deprecation<a class="anchor" aria-label="anchor" href="#new-features-and-deprecation-1-0-0"></a></h3>
<ul><li>Many constructive functions gain the <code>classes</code> argument that generalize <code><a href="../reference/construct_dput.html">construct_dput()</a></code> and <code><a href="../reference/construct_dput.html">construct_base()</a></code>, so users can enable or disable the idiomatic construction of some classes.</li>
<li>
<code><a href="../reference/construct_reprex.html">construct_reprex()</a></code> and <code><a href="../reference/construct.html">construct_multi()</a></code> gain the <code>include_dotted = TRUE</code> argument so we can optionally disable the construction of objects such as <code>.Random.seed</code> int he global environment or <code>.Class</code> in the execution environment of S3 methods.s</li>
<li>
<code><a href="../reference/construct.html">construct()</a></code> and <code><a href="../reference/construct.html">construct_multi()</a></code> gain the arguments <code>unicode_representation</code> and <code>escape</code> previously used by <code><a href="../reference/opts_atomic.html">opts_atomic()</a></code> and these are now not only applied on strings but also on element names and variable names.</li>
<li>We look at the encoding when constructing character vectors, so an UTF-8 “é” is not constructed like a latin-1 “é” anymore. Hopefully this will help some users out of encoding hell faster.</li>
<li>
<code><a href="../reference/opts_tbl_df.html">opts_tbl_df()</a></code> gains a <code>justify</code> argument to control the justification of columns with <code>constructor =</code>“tribble”` (Thanks Jacob Scott <a href="https://github.com/wurli" class="external-link">@wurli</a> for the implementation).</li>
<li>The imports and lazydata environments of packages are constructed with <code>parent.env(asNamespace("pkg"))</code> and <code>getNamespaceInfo("pkg", "lazydata")</code>. Before that they were constructed as regular environments.</li>
<li>When constructing environments we now lock environments and bindings when relevant.</li>
<li>We construct negative zeroes as <code>-0</code>. <code>identical(0, -0))</code> is <code>TRUE</code> but <code>1/-0</code> is <code>-Inf</code> so it made sense to support them.</li>
<li>
<code><a href="../reference/opts_environment.html">opts_environment()</a></code> gains a <code>"predefine"</code> constructor and <code>opts_environment(predefine = TRUE)</code> is deprecated. The old way still works but warns and is not documented anymore.</li>
<li>In <code><a href="../reference/opts_atomic.html">opts_atomic()</a></code> the arguments <code>unicode_representation</code> and <code>escape</code> are deprecated, use the new <code><a href="../reference/opts_character.html">opts_character()</a></code> function or set them in the main function directly instead so they also affect symbols and argument names. The old way still works but warns and is not documented anymore.</li>
</ul></div>
<div class="section level3">
<h3 id="fixes-1-0-0">Fixes<a class="anchor" aria-label="anchor" href="#fixes-1-0-0"></a></h3>
<ul><li>We solve some operator precedence issues in <code><a href="../reference/deparse_call.html">deparse_call()</a></code>
</li>
<li>Named vectors of length 1 are constructed properly</li>
<li>Objects are constructed properly if their names have attributes, contain <code>NA</code>s, or are named like <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>’s arguments <code>recursive</code> and <code>use.names</code>
</li>
<li>Circularity is detected when attempting to construct an environment refering to itself with an inappropriate constructor. It now fails explicitly rather than trigger an infinite loop or a low level error.</li>
<li>
<code>NA</code>s and <code>NaN</code>s are not conflated anymore when compressing double vectors</li>
<li>complex numbers are constructed properly regarding the different combination of <code>NA</code> values in their real and imaginary parts.</li>
<li>We check for the S4 bit using <code><a href="https://rdrr.io/r/base/isS4.html" class="external-link">isS4()</a></code> and use <code><a href="https://rdrr.io/r/base/isS4.html" class="external-link">asS4()</a></code> when necessary</li>
<li>In <code><a href="../reference/opts_numeric_version.html">opts_numeric_version()</a></code>, <code><a href="../reference/opts_package_version.html">opts_package_version()</a></code> and <code><a href="../reference/opts_R_system_version.html">opts_R_system_version()</a></code> the incorrectly named “atomic” constructor is replaced by a “list” constructor</li>
<li>data frames, data tables and tibbles are now properly constructed when they contain columns that their idiomatic constructors cannot handle, such as “row.names”, or “stringsAsFactors” for data frames.</li>
<li>POSIXlt are constructed according to the R version, to account for the changes in R 4.3.0</li>
<li>We can construct objects with a “.Data” attribute, this used to fail because <code><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure()</a></code> has a <code>.Data</code> argument.</li>
<li>The default “row.names” attribute is built with the <code>c(NA, -&lt;nrow&gt;)</code> form, as in <code><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput()</a></code>, this solves some rare corner cases.</li>
<li>We fix some issues with raw strings when constructing character vectors</li>
<li>We fix some issues with <code>NA</code>, <code>NaN</code>, <code>Inf</code> dates and <code>NULL</code> timezones</li>
<li>We fix the environment attribute repair</li>
<li>Functions with non syntactic formals are constructed properly</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="constructive-030">constructive 0.3.0<a class="anchor" aria-label="anchor" href="#constructive-030"></a></h2><p class="text-muted">CRAN release: 2024-03-05</p>
<ul><li>A new debugging tool, the <code><a href="../reference/construct_reprex.html">construct_reprex()</a></code> function, is introduced. It can be called in any function and will construct all variables and arguments where it’s called.</li>
<li>
<code><a href="../reference/construct.html">construct_multi()</a></code> now constructs promises, in practice this is useful so we can construct the evaluation environment of a function, including the uneavaluated and potentially NSE args of a function</li>
<li>Set <code>options(constructive_print_mode = &lt;character&gt;)</code> where <code>&lt;character&gt;</code> is a vector of strings among <code>"console"</code>, <code>script</code>, <code>"clipboard"</code> and <code>"reprex"</code>. The default behavior is “console”. See `<code>?</code>constructive-global_options`</li>
<li>
<code>opts_atomic(escape = FALSE)</code> (the default) now correctly uses surrounding single quotes for strings that contain double quotes and no single quotes.</li>
<li>
<code><a href="../reference/deparse_call.html">deparse_call()</a></code> is more robust and gains the arguments <code>escape</code> and <code>unicode_representation</code> that were already present in <code><a href="../reference/opts_atomic.html">opts_atomic()</a></code>
</li>
<li>The ggplot object generation supports the internal changes of ggplot2 3.5.0, and the resulting construction is nicer.</li>
<li>Data frames can be reconstructed when their columns don’t have a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> method</li>
<li>The “read.table” constructor for data frames supports the <code>one_liner</code> argument</li>
<li>roxygen2 is Suggested (not Imported anymore), the ellipsis dependency is removed</li>
<li>formulas have a “next” constructor, useful to see what formulas are at a low level</li>
<li>classes with S3 methods for <code>length</code>, <code>[</code>, <code>[[</code> etc are handled better</li>
<li>
<code><a href="../reference/dot-env.html">.env()</a></code> doesn’t crash anymore when provided a wrong or obsolete memory address</li>
<li>Integer vectors are constructed properly when they feature consecutive elements differing by more than <code>.Machine$integer.max</code>
</li>
<li>Classed objects of types “…” and “externalptr” and are constructed properly</li>
<li>S4 construction uses the <code>slot</code> argument rather than the <code>representation</code> arg</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="constructive-020">constructive 0.2.0<a class="anchor" aria-label="anchor" href="#constructive-020"></a></h2><p class="text-muted">CRAN release: 2023-11-13</p>
<ul><li>We don’t use {styler} anymore, performance is sensibly enhanced as a consequence.</li>
<li>The package works without having {prettycode} installed, but uses it if it’s installed</li>
<li>We default to using the magrittr pipe <code>%&gt;%</code> for R versions that don’t support <code>|&gt;</code>
</li>
<li>
<code>NA</code> levels are supported for the classes “factor” and “ordered”</li>
<li>Environment construction includes variables prefixed with a dot</li>
<li>When we don’t attach the package, we don’t need to use <code>constructive::</code> in the <code>...</code> before <code>opts_*</code> functions, for instance we can call <code>constructive::construct(cars, opts_data.frame("read.table"))</code>.</li>
<li>
<code>quote({})</code> is now constructed as <code>"{ }"</code> rather than <code>"`{`()"</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="constructive-010">constructive 0.1.0<a class="anchor" aria-label="anchor" href="#constructive-010"></a></h2><p class="text-muted">CRAN release: 2023-06-06</p>
<ul><li>First CRAN release</li>
<li>
<code><a href="../reference/construct.html">construct()</a></code> generates the code to build an object using idiomatic code, it wraps the lower level <code><a href="../reference/dot-cstr_construct.html">.cstr_construct()</a></code> S3 generic.</li>
<li>We currently support 66 classes/types: “array”, “AsIs”, “atomic”, “classGeneratorFunction”, “classPrototypeDef”, “classRepresentation”, “constructive_options”, “CoordCartesian”, “CoordFixed”, “CoordFlip”, “CoordMap”, “CoordMunch”, “CoordPolar”, “CoordQuickmap”, “CoordSf”, “CoordTrans”, “data.frame”, “data.table”, “Date”, “default”, “dm”, “dots”, “element_blank”, “element_grob”, “element_line”, “element_rect”, “element_render”, “element_text”, “environment”, “externalptr”, “FacetWrap”, “factor”, “formula”, “function”, “ggplot”, “ggproto”, “grouped_df”, “labels”, “language”, “Layer”, “list”, “margin”, “matrix”, “mts”, “numeric_version”, “ordered”, “package_version”, “pairlist”, “POSIXct”, “POSIXlt”, “quosure”, “quosures”, “R_system_version”, “rel”, “rowwise_df”, “S4”, “Scale”, “ScalesList”, “simpleUnit”, “tbl_df”, “theme”, “ts”, “uneval”, “vctrs_list_of”, “waiver” and “weakref”.</li>
<li>A set of functions prefixed with <code>opts_</code> can be used to choose various constructors and apply parameters to tweak the output.</li>
<li>A special constructor named “next” can be used to fall back on the next <code><a href="../reference/dot-cstr_construct.html">.cstr_construct()</a></code> method. This is useful to explore objects at a level one step lower than the idiomatic constructor.</li>
<li>When a corrupted object is encountered the next method is used.</li>
<li>Users can extend the package using a set of exported functions prefixed with <code>.cstr_</code>, a vignette describes how to proceed.</li>
<li>
<code><a href="../reference/construct_issues.html">construct_issues()</a></code> is used without arguments to check what were the issues encountered with the last reconstructed object, it can also be provided a specific constructive object.</li>
<li>
<code><a href="../reference/construct_diff.html">construct_diff()</a></code> highlights the differences in the code used to produce 2 objects.</li>
<li>
<code><a href="../reference/construct.html">construct_multi()</a></code> constructs several objects from a named list,</li>
<li>
<code><a href="../reference/construct_dump.html">construct_dump()</a></code> is similar to <code><a href="https://rdrr.io/r/base/dump.html" class="external-link">base::dump()</a></code>, it’s a wrapper around <code><a href="../reference/construct.html">construct_multi()</a></code> that writes to a file.</li>
<li>
<code><a href="../reference/construct_signature.html">construct_signature()</a></code> constructs a function signature such as the one we see in the “usage” section of a function’s help file. outputs the code produced<br></li>
<li>
<code><a href="../reference/deparse_call.html">deparse_call()</a></code> is an alternative to <code><a href="https://rdrr.io/r/base/deparse.html" class="external-link">base::deparse()</a></code> and <code><a href="https://rlang.r-lib.org/reference/expr_print.html" class="external-link">rlang::expr_deparse()</a></code> that handles additional corner cases and fails when encountering tokens other than symbols and syntactic literals .</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.1" id="constructive-001">constructive 0.0.1<a class="anchor" aria-label="anchor" href="#constructive-001"></a></h2>
<ul><li>{constructive} produces code that can be used to recreate R objects. In a sense it is similar to <code><a href="https://rdrr.io/r/base/dput.html" class="external-link">base::dput()</a></code> or <code><a href="https://rdrr.io/r/base/deparse.html" class="external-link">base::deparse()</a></code> but {constructive} strives to use “natural” constructors (<code>factor</code> for factors, <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code> for dates, <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> for data frames etc), in order to get output readable by humans.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Antoine Fabri.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

